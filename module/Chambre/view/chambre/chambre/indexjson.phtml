<?php
$title = "Gestion des chambres de l'hôtel n°" . $this->escapeHtml($idHotel) . " - Json";
$this->headTitle($title);
$adresse = "http://localhost/HotelierJson/public/chambre//" . $this->escapeHtml($idHotel);
$affichage = "\"http://localhost/HotelierJson/public/chambre/listeChambreJson/" . $this->escapeHtml($idHotel) . "\"";
?>

<script>
    var app = angular.module('main', ['ngTable']).
            controller('DemoCtrl', function ($scope, $filter, ngTableParams, $http) {

                $http({method: 'GET', url: '/HotelierJson/public/chambre/listeChambreJson/<?php echo $this->escapeHtml($idHotel); ?>'}).
                        success(function (data) {
                            $scope.tableParams = new ngTableParams({
                                page: 1,
                                count: 5,
                                sorting: {
                                    idChambre: 'asc'
                                }
                            }, {
                                total: data.length, // length of data
                                getData: function ($defer, params) {
                                    var orderedData = params.sorting() ?
                                            $filter('orderBy')(data, params.orderBy()) :
                                            data;
                                    $defer.resolve(orderedData.slice((params.page() - 1) * params.count(), params.page() * params.count()));
                                }
                            });
                        }).
                        error(function (data) {
                        });
            });
</script>

<h1><?php echo $this->escapeHtml($title); ?> <a href=<?php echo $adresse ?> class="btn btn-success">Normal</a></h1>

<center>
    <body ng-app="main">
        <div ng-controller="DemoCtrl">
            <p><strong>Page n°</strong> {{tableParams.page()}} <strong></p>
            <p>Nombre de chambres par page :</strong> {{tableParams.count()}}</p>

            <table ng-table="tableParams" class="table ng-table-responsive table-condensed table-hover table-bordered table-striped">
                <tr ng-repeat="chambre in $data">
                    <td data-title="'Identifiant'" sortable="'idChambre'">{{chambre.idChambre}}</td>
                    <td data-title="'Hotel'" sortable="'idHotel'">{{chambre.idHotel}}</td>
                    <td data-title="'Nom'" sortable="'nomChambre'">{{chambre.nomChambre}}</td>
                    <td data-title="'Type'"sortable="'type'">{{chambre.type}}</td>
                    </td>
                </tr>
            </table>
        </div>
    </body>
</center>
